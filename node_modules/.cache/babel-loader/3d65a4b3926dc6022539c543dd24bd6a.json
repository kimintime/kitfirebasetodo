{"ast":null,"code":"// ag-grid-react v27.3.0\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar beansContext_1 = require(\"../beansContext\");\n\nvar useEffectOnce_1 = require(\"../useEffectOnce\");\n\nvar useJsCellRenderer = function useJsCellRenderer(showDetails, showTools, eCellValue, cellValueVersion, jsCellRendererRef, eGui) {\n  var _a = react_1.useContext(beansContext_1.BeansContext),\n      context = _a.context,\n      userComponentFactory = _a.userComponentFactory;\n\n  var destroyCellRenderer = react_1.useCallback(function () {\n    var comp = jsCellRendererRef.current;\n\n    if (!comp) {\n      return;\n    }\n\n    var compGui = comp.getGui();\n\n    if (compGui && compGui.parentElement) {\n      compGui.parentElement.removeChild(compGui);\n    }\n\n    context.destroyBean(comp);\n    jsCellRendererRef.current = undefined;\n  }, []); // create or refresh JS cell renderer\n\n  react_1.useEffect(function () {\n    var showValue = showDetails != null;\n    var jsCompDetails = showDetails && showDetails.compDetails && !showDetails.compDetails.componentFromFramework;\n    var waitingForToolsSetup = showTools && eCellValue == null;\n    var showComp = showValue && jsCompDetails && !waitingForToolsSetup; // if not showing comp, destroy any existing one and return\n\n    if (!showComp) {\n      destroyCellRenderer();\n      return;\n    }\n\n    var compDetails = showDetails.compDetails;\n\n    if (jsCellRendererRef.current) {\n      // attempt refresh if refresh method exists\n      var comp_1 = jsCellRendererRef.current;\n      var attemptRefresh = comp_1.refresh != null && showDetails.force == false;\n      var refreshResult = attemptRefresh ? comp_1.refresh(compDetails.params) : false;\n      var refreshWorked = refreshResult === true || refreshResult === undefined; // if refresh worked, nothing else to do\n\n      if (refreshWorked) {\n        return;\n      } // if refresh didn't work, we destroy it and continue, so new cell renderer created below\n\n\n      destroyCellRenderer();\n    }\n\n    var promise = compDetails.newAgStackInstance();\n    ;\n\n    if (!promise) {\n      return;\n    }\n\n    var comp = promise.resolveNow(null, function (x) {\n      return x;\n    }); // js comps are never async\n\n    if (!comp) {\n      return;\n    }\n\n    var compGui = comp.getGui();\n\n    if (!compGui) {\n      return;\n    }\n\n    var parent = showTools ? eCellValue : eGui.current;\n    parent.appendChild(compGui);\n    jsCellRendererRef.current = comp;\n  }, [showDetails, showTools, cellValueVersion]); // this effect makes sure destroyCellRenderer gets called when the\n  // component is destroyed. as the other effect only updates when there\n  // is a change in state\n\n  useEffectOnce_1.useEffectOnce(function () {\n    return destroyCellRenderer;\n  });\n};\n\nexports.default = useJsCellRenderer;","map":{"version":3,"names":["Object","defineProperty","exports","value","react_1","require","beansContext_1","useEffectOnce_1","useJsCellRenderer","showDetails","showTools","eCellValue","cellValueVersion","jsCellRendererRef","eGui","_a","useContext","BeansContext","context","userComponentFactory","destroyCellRenderer","useCallback","comp","current","compGui","getGui","parentElement","removeChild","destroyBean","undefined","useEffect","showValue","jsCompDetails","compDetails","componentFromFramework","waitingForToolsSetup","showComp","comp_1","attemptRefresh","refresh","force","refreshResult","params","refreshWorked","promise","newAgStackInstance","resolveNow","x","parent","appendChild","useEffectOnce","default"],"sources":["/Users/apollostowel/firebasetodo/node_modules/ag-grid-react/lib/reactUi/cells/showJsRenderer.js"],"sourcesContent":["// ag-grid-react v27.3.0\n\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar beansContext_1 = require(\"../beansContext\");\nvar useEffectOnce_1 = require(\"../useEffectOnce\");\nvar useJsCellRenderer = function (showDetails, showTools, eCellValue, cellValueVersion, jsCellRendererRef, eGui) {\n    var _a = react_1.useContext(beansContext_1.BeansContext), context = _a.context, userComponentFactory = _a.userComponentFactory;\n    var destroyCellRenderer = react_1.useCallback(function () {\n        var comp = jsCellRendererRef.current;\n        if (!comp) {\n            return;\n        }\n        var compGui = comp.getGui();\n        if (compGui && compGui.parentElement) {\n            compGui.parentElement.removeChild(compGui);\n        }\n        context.destroyBean(comp);\n        jsCellRendererRef.current = undefined;\n    }, []);\n    // create or refresh JS cell renderer\n    react_1.useEffect(function () {\n        var showValue = showDetails != null;\n        var jsCompDetails = showDetails && showDetails.compDetails && !showDetails.compDetails.componentFromFramework;\n        var waitingForToolsSetup = showTools && eCellValue == null;\n        var showComp = showValue && jsCompDetails && !waitingForToolsSetup;\n        // if not showing comp, destroy any existing one and return\n        if (!showComp) {\n            destroyCellRenderer();\n            return;\n        }\n        var compDetails = showDetails.compDetails;\n        if (jsCellRendererRef.current) {\n            // attempt refresh if refresh method exists\n            var comp_1 = jsCellRendererRef.current;\n            var attemptRefresh = comp_1.refresh != null && showDetails.force == false;\n            var refreshResult = attemptRefresh ? comp_1.refresh(compDetails.params) : false;\n            var refreshWorked = refreshResult === true || refreshResult === undefined;\n            // if refresh worked, nothing else to do\n            if (refreshWorked) {\n                return;\n            }\n            // if refresh didn't work, we destroy it and continue, so new cell renderer created below\n            destroyCellRenderer();\n        }\n        var promise = compDetails.newAgStackInstance();\n        ;\n        if (!promise) {\n            return;\n        }\n        var comp = promise.resolveNow(null, function (x) { return x; }); // js comps are never async\n        if (!comp) {\n            return;\n        }\n        var compGui = comp.getGui();\n        if (!compGui) {\n            return;\n        }\n        var parent = showTools ? eCellValue : eGui.current;\n        parent.appendChild(compGui);\n        jsCellRendererRef.current = comp;\n    }, [showDetails, showTools, cellValueVersion]);\n    // this effect makes sure destroyCellRenderer gets called when the\n    // component is destroyed. as the other effect only updates when there\n    // is a change in state\n    useEffectOnce_1.useEffectOnce(function () {\n        return destroyCellRenderer;\n    });\n};\nexports.default = useJsCellRenderer;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}